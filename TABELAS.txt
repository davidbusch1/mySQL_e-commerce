create database if not exists PROJETO;
use PROJETO;
#drop database PROJETO;



#------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
#CRIAÇÃO DAS TABELAS DE ACESSO:

create table if not exists CARGO
(C_CODIGO INT NOT NULL,
NOME VARCHAR(45) NOT NULL,
PRIMARY KEY (C_CODIGO));

create table if not exists SETOR
(S_CODIGO INT NOT NULL,
NOME VARCHAR(45) NOT NULL,
PRIMARY KEY (S_CODIGO));

create table if not exists FABRICANTE
(F_CODIGO INT NOT NULL,
NOME VARCHAR(45) NOT NULL,
PRIMARY KEY (F_CODIGO));

create table if not exists TIPO_SOLICITACAO
(S_CODIGO INT NOT NULL,
TIPO VARCHAR(45) NOT NULL,
PRIMARY KEY (S_CODIGO));

create table if not exists ESTATS
(E_CODIGO INT NOT NULL,
NOME VARCHAR(45) NOT NULL,
PRIMARY KEY (E_CODIGO));

create table if not exists PAGAMENTO
(PAG_CODIGO INT NOT NULL,
METODO VARCHAR(45) NOT NULL,
PRIMARY KEY (PAG_CODIGO));


#------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
#CRIAÇÃO DAS TABELAS DE DADOS:

create table if not exists CLIENTE
(CPF CHAR(14) NOT NULL,
NOME VARCHAR(45) NOT NULL,
SOBRENOME VARCHAR(45) NOT NULL,
TELEFONE CHAR(11) NOT NULL,
ENDERECO VARCHAR(50) NOT NULL,
CIDADE VARCHAR(45) NOT NULL,
BAIRRO VARCHAR(45) NOT NULL,
CEP CHAR(10) NOT NULL,
EMAIL VARCHAR(60) NOT NULL,
SENHA VARCHAR(45) NOT NULL,
PRIMARY KEY (CPF));

create table if not exists FUNCIONARIO
(MATRICULA CHAR(8) NOT NULL,
C_CODIGO INT NOT NULL,
S_CODIGO INT NOT NULL,
NOME VARCHAR(45) NOT NULL,
EMAIL_CORP VARCHAR(60) NOT NULL,
TELEFONE CHAR(11),
SENHA VARCHAR(45),
PRIMARY KEY (MATRICULA),
FOREIGN KEY (C_CODIGO) REFERENCES CARGO(C_CODIGO),
FOREIGN KEY (S_CODIGO) REFERENCES SETOR(S_CODIGO));

create table if not exists PRODUTO
(P_CODIGO CHAR(10) NOT NULL,
TITULO VARCHAR(45) NOT NULL,
VALOR FLOAT NOT NULL,
ESCALA CHAR(4) NOT NULL,
LOTE INT,
DESCRICAO VARCHAR(255) NOT NULL,
QUANT_DISP INT NOT NULL,
QUANT_VEND INT NOT NULL,
IMAGEM LONGBLOB NOT NULL,
F_CODIGO INT NOT NULL,
MATRICULA CHAR(8) NOT NULL,
PRIMARY KEY (P_CODIGO),
FOREIGN KEY (F_CODIGO) REFERENCES FABRICANTE(F_CODIGO),
FOREIGN KEY (MATRICULA) REFERENCES FUNCIONARIO(MATRICULA));

create table if not exists PEDIDO
(NUMERO CHAR(10) NOT NULL,
DATA_ENTREGA DATE,
DATA_PEDIDO DATE,
CPF CHAR(14) NOT NULL,
E_CODIGO INT NOT NULL,
MATRICULA CHAR(8) NOT NULL,
PAG_CODIGO INT NOT NULL,
VALOR_PEDIDO FLOAT NOT NULL,
PRIMARY KEY (NUMERO),
FOREIGN KEY (E_CODIGO) REFERENCES ESTATS(E_CODIGO),
FOREIGN KEY (MATRICULA) REFERENCES FUNCIONARIO(MATRICULA),
FOREIGN KEY (PAG_CODIGO) REFERENCES PAGAMENTO(PAG_CODIGO),
FOREIGN KEY (CPF) REFERENCES CLIENTE(CPF));

create table if not exists SOLICITACAO
(CODIGO INT NOT NULL,
DESCRICAO VARCHAR(200),
MATRICULA CHAR(8) NOT NULL,
S_CODIGO INT NOT NULL,
E_CODIGO INT NOT NULL,
NUMERO CHAR(10) NOT NULL,
PRIMARY KEY (CODIGO),
FOREIGN KEY (MATRICULA) REFERENCES FUNCIONARIO(MATRICULA),
FOREIGN KEY (S_CODIGO) REFERENCES TIPO_SOLICITACAO(S_CODIGO),
FOREIGN KEY (E_CODIGO) REFERENCES ESTATS(E_CODIGO),
FOREIGN KEY (NUMERO) REFERENCES PEDIDO(NUMERO));

create table if not exists ITENS_PEDIDO
(SEQUENCIAL_PEDIDO INT NOT NULL,
QUANTIDADE_ITENS VARCHAR(45) NOT NULL,
VALOR_UNIT FLOAT NOT NULL,
VALOR_TOTAL FLOAT NOT NULL,
P_CODIGO CHAR(10) NOT NULL,
NUMERO CHAR(10) NOT NULL,
FOREIGN KEY (P_CODIGO) REFERENCES PRODUTO(P_CODIGO),
FOREIGN KEY (NUMERO) REFERENCES PEDIDO(NUMERO));

create table if not exists CARRINHO
(ID_CARRINHO INT NOT NULL,
NUMERO CHAR(10) NOT NULL,
PRIMARY KEY (ID_CARRINHO),
FOREIGN KEY (NUMERO) REFERENCES PEDIDO(NUMERO));
